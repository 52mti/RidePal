<view class="container">
  <custom-nav title="找车" bg-color="#ffffff" text-color="#000000" />

  <view class="date-tabs-container">
    <view class="date-tabs">
      <view class="tab-item {{ activeDateTab === 0 ? 'active' : '' }}" bindtap="onSwitchDate" data-index="0">今天发车</view>
      <view class="tab-item {{ activeDateTab === 1 ? 'active' : '' }}" bindtap="onSwitchDate" data-index="1">明天发车</view>
    </view>
  </view>

  <view class="filter-bar-wrapper">
    <view class="time-selector" bindtap="onFilterTime">
      <van-icon name="clock-o" color="#999" size="16px" />
      <text class="placeholder">选择开车时间</text>
    </view>
    <view class="filter-btn" bindtap="onOpenMoreFilters">
      <van-icon name="setting-o" size="20px" color="#666" />
    </view>
  </view>

  <scroll-view scroll-y class="main-content">
    <block wx:for="{{ carpoolList }}" wx:key="id">
      <view class="carpool-card">
        <view class="card-top">
          <view class="user-info">
            <image class="avatar" src="{{item.avatar}}" mode="aspectFill"></image>
            <text class="user-name">{{item.nickname}}</text>
          </view>
          <text class="depart-time {{ item.status === 'full' ? 'time-disabled' : 'time-active' }}">{{item.time}}</text>
        </view>

        <view class="card-route">
          <view class="route-row">
            <view class="route-left">
              <view class="icon-up">上</view>
              <text class="address-text">{{item.startPoint}}</text>
            </view>
            <view class="route-right">
              <view class="status-tag {{item.statusClass}}">{{item.statusText}}</view>
            </view>
          </view>
          
          <view class="route-row">
            <view class="route-left">
              <view class="icon-down">下</view>
              <text class="address-text">{{item.endPoint}}</text>
            </view>
            <view class="route-right">
              <view class="price"><text class="currency">¥</text>{{item.price}}<text class="unit">/人</text></view>
            </view>
          </view>
        </view>
      </view>
    </block>

    <view class="bottom-spacer"></view>
  </scroll-view>

  <view class="fab-button" bindtap="onPublish">
    <van-icon name="plus" color="#fff" size="24px" />
  </view>

  <service-menu-modal 
    show="{{ showServiceMenu }}" 
    bind:close="onCloseServiceMenu" 
    bind:select="onSelectService"
  />
</view>